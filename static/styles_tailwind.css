/* ===== Tailwind CSS Base + Custom Styles for 智能護理助手 ===== */

/* Tailwind CSS Directives - These will be processed by Tailwind CLI */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== CSS Variables (Design Tokens) ===== */
@layer base {
  :root {
    --primary-color: #4A90E2;
    --secondary-color: #7ED9C3;
    --accent-color: #87CEEB;
    --bg-main: #F0F8FF;
    --bg-secondary: #E6F3F7;
    --text-primary: #2C3E50;
    --text-secondary: #5D6D7E;
    --cream: #F8FBFF;
    --success: #52C89F;
    --error: #E74C3C;
    --warning: #F39C12;
    --shadow-soft: rgba(74, 144, 226, 0.15);
    --border-radius: 20px;
    --transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    --medical-blue-light: #5DADE2;
    --medical-blue-dark: #2874A6;
    --tech-glow: rgba(74, 144, 226, 0.6);
    --tech-bg-overlay: rgba(240, 248, 255, 0.85);
    --tech-border: rgba(74, 144, 226, 0.5);
    --sidebar-width: 320px;
    --topbar-height: 90px;
    --composer-height: 80px;
  }

  * {
    @apply m-0 p-0 box-border;
  }

  body,
  html {
    @apply h-full overflow-hidden;
    font-family: 'Noto Sans TC', -apple-system, BlinkMacSystemFont, sans-serif;
    color: var(--text-primary);
    background: var(--bg-main);
  }
}

/* ===== Custom Components Layer ===== */
@layer components {
  /* Background Layers */
  .forest-bg {
    @apply fixed top-0 left-0 w-full h-full -z-10 overflow-hidden;
    background: linear-gradient(135deg, #F0F8FF 0%, #E6F3F7 50%, #D5E8F0 100%);
  }

  .bg-layer {
    @apply absolute w-[110%] h-[110%] bg-cover;
    animation: parallax 60s infinite linear;
  }

  .canopy {
    background: radial-gradient(circle at 20% 30%, rgba(74, 144, 226, 0.1) 0%, transparent 50%),
      radial-gradient(circle at 80% 70%, rgba(126, 217, 195, 0.1) 0%, transparent 50%);
    @apply opacity-60;
    animation-duration: 120s;
  }

  .midground {
    background-image: repeating-linear-gradient(0deg, transparent, transparent 50px, rgba(74, 144, 226, 0.03) 50px, rgba(74, 144, 226, 0.03) 51px);
    @apply opacity-40;
    animation-duration: 80s;
  }

  /* Falling Leaves */
  .leaf {
    @apply fixed w-5 h-5 rounded-[0_100%_0_100%] pointer-events-none z-[1] opacity-20;
    background: linear-gradient(45deg, #FFB366 0%, #FFA76E 100%);
    animation: falling-leaf 15s linear infinite;
  }

  .leaf:nth-child(1) {
    @apply left-[10%];
    animation-delay: 0s;
  }

  .leaf:nth-child(2) {
    @apply left-[30%];
    animation-delay: 5s;
  }

  .leaf:nth-child(3) {
    @apply left-[50%];
    animation-delay: 10s;
  }

  .leaf:nth-child(4) {
    @apply left-[70%];
    animation-delay: 7s;
  }

  .leaf:nth-child(5) {
    @apply left-[90%];
    animation-delay: 12s;
  }

  /* Loading Overlay */
  .loading-overlay {
    @apply fixed top-0 left-0 w-full h-full flex items-center justify-center z-[9999] opacity-100 transition-opacity duration-500;
    background: rgba(255, 247, 237, 0.95);
  }

  .loading-overlay.hidden {
    @apply opacity-0 pointer-events-none;
  }

  .loading-logo {
    @apply w-[150px] h-[150px] rounded-full;
    animation: loading-bounce 1.5s ease-in-out infinite;
  }

  /* Main Container */
  .main-container {
    @apply h-screen max-w-[1920px] mx-auto p-[15px] relative rounded-[var(--border-radius)];
    display: grid;
    grid-template-rows: var(--topbar-height) 1fr var(--composer-height);
    border: 1px solid var(--tech-border);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1),
      inset 0 0 20px rgba(255, 255, 255, 0.5),
      0 0 60px rgba(127, 203, 138, 0.2);
    background: var(--tech-bg-overlay);
    backdrop-filter: blur(10px);
  }

  /* Top Bar */
  .top-bar {
    @apply flex items-center justify-between px-6 py-4 rounded-[20px] mb-2.5;
    background: rgba(255, 255, 255, 0.7);
    box-shadow: 0 4px 15px rgba(94, 71, 33, 0.2);
    backdrop-filter: blur(8px);
    border: 1px solid var(--tech-border);
  }

  .app-title {
    @apply flex items-center gap-3 text-[28px] font-bold;
    color: var(--medical-blue-dark);
  }

  .nurse-logo {
    @apply w-[50px] h-[50px] rounded-full object-cover;
  }

  .performance-badge {
    @apply text-white px-4 py-1.5 rounded-[20px] text-sm font-semibold;
    background: linear-gradient(45deg, #52C89F, #7ED9C3);
  }

  .settings-btn {
    @apply w-[45px] h-[45px] rounded-full cursor-pointer flex items-center justify-center;
    background: linear-gradient(135deg, var(--primary-color), #FF8A4C);
    border: 2px solid rgba(255, 255, 255, 0.5);
    transition: var(--transition);
  }

  .settings-btn svg {
    @apply w-6 h-6 fill-white;
  }

  /* Weather Widget */
  .mini-weather {
    @apply fixed top-[30px] right-[110px] z-[2000] flex items-center gap-2 px-3 py-1.5 rounded-[18px] text-sm;
    background: rgba(255, 255, 255, 0.9);
  }

  /* Chat and Tools Layout */
  .chat-and-tools {
    @apply h-full min-h-0 overflow-hidden gap-4;
    display: grid;
    grid-template-columns: 1fr var(--sidebar-width);
  }

  /* Chat Main Area */
  .chat-main {
    @apply flex flex-col min-h-0 overflow-hidden;
  }

  .messages-area {
    @apply flex-1 rounded-[24px] p-10 pb-[45px] overflow-y-auto overflow-x-hidden flex flex-col gap-6 text-lg leading-relaxed;
    background: rgba(255, 255, 255, 0.85);
    border: 2px solid var(--tech-border);
    box-shadow: inset 0 4px 20px rgba(139, 115, 85, 0.2);
    backdrop-filter: blur(5px);
    scrollbar-width: thin;
    scrollbar-color: var(--secondary-color) transparent;
  }

  .messages-area::-webkit-scrollbar {
    @apply w-2;
  }

  .messages-area::-webkit-scrollbar-thumb {
    @apply rounded;
    background: var(--secondary-color);
  }

  /* Message Bubbles */
  .message-bubble {
    @apply max-w-[85%] px-5 py-4 rounded-[24px];
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    animation: bubbleAppear 0.5s ease forwards;
  }

  .user-bubble {
    @apply self-end;
    background: linear-gradient(135deg, #FFF7ED 0%, #FFE4C4 100%);
    border: 2px solid var(--primary-color);
  }

  .fox-bubble,
  .nurse-bubble {
    @apply self-start;
    background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
    border: 2px solid var(--secondary-color);
  }

  /* Tools Sidebar */
  .tools-sidebar {
    @apply flex flex-col gap-3 min-h-0 overflow-y-auto p-3 rounded-2xl;
    background: rgba(255, 255, 255, 0.75);
    border: 1px solid var(--tech-border);
    backdrop-filter: blur(8px);
    scrollbar-width: thin;
    scrollbar-color: var(--secondary-color) transparent;
  }

  .tools-sidebar::-webkit-scrollbar {
    @apply w-1.5;
  }

  .tools-sidebar::-webkit-scrollbar-thumb {
    @apply rounded;
    background: var(--secondary-color);
  }

  /* Quick Parameters */
  .quick-params-collapsible {
    @apply p-3 rounded-xl;
    background: linear-gradient(135deg, rgba(74, 144, 226, 0.05), rgba(126, 217, 195, 0.05));
    border: 1px solid var(--tech-border);
    transition: var(--transition);
  }

  .quick-params-collapsible[open] {
    box-shadow: 0 4px 15px rgba(74, 144, 226, 0.15);
  }

  .params-header {
    @apply cursor-pointer font-semibold flex items-center gap-2.5 px-1 py-2 select-none;
    color: var(--medical-blue-dark);
    list-style: none;
  }

  .params-header:hover {
    color: var(--primary-color);
  }

  .params-grid {
    @apply grid grid-cols-1 gap-2.5 mt-3;
  }

  .control-group {
    @apply flex flex-col gap-1.5;
  }

  .control-label {
    @apply text-[13px] font-semibold flex items-center gap-1.5;
    color: var(--text-primary);
  }

  .control-select {
    @apply w-full px-2.5 py-2 rounded-[10px] bg-white text-sm cursor-pointer;
    border: 2px solid var(--secondary-color);
    transition: var(--transition);
  }

  .control-select:hover {
    border-color: var(--primary-color);
  }

  .quick-action-btns {
    @apply grid grid-cols-2 gap-2 mt-3;
  }

  .quick-btn {
    @apply px-2.5 py-2.5 text-white border-0 rounded-[10px] text-[13px] font-semibold cursor-pointer;
    background: linear-gradient(135deg, var(--secondary-color), #5DBB63);
    transition: var(--transition);
  }

  .quick-btn:hover {
    @apply -translate-y-0.5;
    box-shadow: 0 4px 12px rgba(82, 200, 159, 0.4);
  }

  .execute-btn {
    background: linear-gradient(135deg, var(--primary-color), #FF8A4C);
  }

  /* Mini Cards */
  .mini-card {
    @apply bg-white rounded-xl p-3;
    border: 1px solid var(--tech-border);
    box-shadow: 0 2px 8px var(--shadow-soft);
  }

  .card-header {
    @apply text-sm font-semibold mb-2 flex items-center gap-1.5;
    color: var(--text-primary);
  }

  .card-content {
    @apply text-[13px];
    color: var(--text-secondary);
  }

  .stat-row {
    @apply flex justify-between mb-1;
  }

  .status-dot {
    @apply w-3 h-3 rounded-full inline-block mr-2;
    background: var(--success);
    box-shadow: 0 0 8px var(--success);
  }

  /* Bottom Composer */
  .bottom-composer {
    @apply gap-2.5 items-center px-3.5 py-2.5 rounded-[20px];
    display: grid;
    grid-template-columns: 1fr auto auto auto;
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid var(--tech-border);
    box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(8px);
  }

  .bottom-composer textarea {
    @apply flex-1 px-4 py-3 rounded-[20px] bg-white text-base resize-none min-h-[44px] max-h-[120px] leading-[1.5];
    border: 2px solid var(--tech-border);
    font-family: inherit;
    transition: var(--transition);
  }

  .bottom-composer textarea:focus {
    @apply outline-none;
    border-color: var(--secondary-color);
    box-shadow: 0 0 0 3px var(--tech-glow);
  }

  /* Voice Button */
  .voice-button-container {
    @apply relative flex flex-col items-center;
  }

  .voice-button {
    @apply w-[50px] h-[50px] rounded-full bg-white cursor-pointer flex items-center justify-center;
    border: 2px solid var(--primary-color);
    transition: var(--transition);
    box-shadow: 0 2px 8px rgba(74, 144, 226, 0.3);
  }

  .voice-button:hover {
    @apply scale-110;
    box-shadow: 0 4px 12px rgba(74, 144, 226, 0.5);
  }

  .mic-icon {
    @apply text-2xl;
  }

  .voice-button.recording {
    background: linear-gradient(145deg, #ff6b6b, #ff5252);
    border-color: #ff3838;
    animation: recording-pulse 1.2s infinite;
  }

  .voice-hint {
    @apply absolute -bottom-6 text-[11px] whitespace-nowrap opacity-0 transition-opacity duration-300;
    color: var(--text-secondary);
  }

  .voice-button-container:hover .voice-hint {
    @apply opacity-100;
  }

  /* Icon Buttons */
  .icon-button {
    @apply w-[50px] h-[50px] rounded-full border-0 cursor-pointer flex items-center justify-center text-xl;
    transition: var(--transition);
  }

  .send-btn {
    @apply text-white;
    background: linear-gradient(135deg, var(--primary-color), #FF8A4C);
  }

  .icon-button:hover {
    @apply -translate-y-0.5;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  }

  /* Checkbox */
  .checkbox-wrapper {
    @apply flex items-center gap-1.5;
  }

  .checkbox-label {
    @apply text-sm cursor-pointer whitespace-nowrap;
    color: var(--text-primary);
  }

  input[type="checkbox"] {
    @apply w-5 h-5 cursor-pointer;
  }

  /* Mobile Params Trigger */
  .mobile-params-trigger {
    @apply hidden w-[50px] h-[50px] rounded-full border-0 cursor-pointer text-2xl;
    background: var(--accent-color);
  }

  /* Params Drawer */
  .params-drawer {
    @apply fixed left-0 right-0 bottom-0 h-[70vh] bg-white z-[3000] hidden;
    border-radius: 20px 20px 0 0;
    box-shadow: 0 -8px 24px rgba(0, 0, 0, 0.15);
    transform: translateY(100%);
    transition: transform 0.3s ease;
  }

  .params-drawer.open {
    transform: translateY(0);
  }

  .drawer-header {
    @apply flex justify-between items-center p-5;
    border-bottom: 1px solid var(--tech-border);
  }

  .drawer-header h3 {
    @apply text-lg;
    color: var(--text-primary);
  }

  .close-drawer {
    @apply w-8 h-8 rounded-full border-0 cursor-pointer text-lg;
    background: var(--bg-secondary);
  }

  .drawer-content {
    @apply p-5 overflow-y-auto;
    max-height: calc(70vh - 80px);
  }

  .drawer-overlay {
    @apply fixed top-0 left-0 w-full h-full opacity-0 invisible z-[2999];
    background: rgba(0, 0, 0, 0.5);
    transition: opacity 0.3s, visibility 0.3s;
  }

  .drawer-overlay.show {
    @apply opacity-100 visible;
  }

  /* Fox/Nurse Assistant */
  .fox-assistant {
    @apply fixed bottom-[120px] right-10 w-[100px] h-[100px] z-50 cursor-pointer;
  }

  .fox-body {
    @apply w-full h-full;
    animation: nurse-idle 4s ease-in-out infinite;
  }

  .nurse-icon-wrapper {
    @apply w-full h-full bg-white rounded-full p-2;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
  }

  .nurse-icon-img {
    @apply w-full h-full object-cover rounded-full;
  }

  /* Settings Panel */
  .settings-panel {
    @apply fixed top-0 h-screen w-[400px] overflow-y-auto z-[1000];
    right: -400px;
    background: var(--cream);
    box-shadow: -5px 0 20px rgba(0, 0, 0, 0.1);
    transition: right 0.3s ease;
  }

  .settings-panel.open {
    @apply right-0;
  }

  .settings-content {
    @apply p-5 flex flex-col gap-5;
  }

  .setting-group {
    @apply px-5 py-4 bg-white rounded-2xl;
    box-shadow: 0 2px 12px var(--shadow-soft);
  }

  .setting-label {
    @apply flex items-center gap-2 text-base font-semibold mb-3;
    color: var(--text-primary);
  }

  .setting-sub-label {
    @apply block text-sm font-medium mt-3;
    color: var(--text-secondary);
  }

  .setting-meter {
    @apply inline-block mt-1.5 text-[13px] font-semibold;
    color: var(--text-secondary);
  }

  .setting-group select,
  .setting-group input[type="text"],
  .setting-group textarea {
    @apply w-full px-3 py-3 rounded-xl text-sm;
    border: 2px solid var(--secondary-color);
    background: var(--cream);
    color: var(--text-primary);
    transition: var(--transition);
  }

  .setting-group select:focus,
  .setting-group input[type="text"]:focus,
  .setting-group textarea:focus {
    @apply outline-none bg-white;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.15);
  }

  .setting-group input[type="range"] {
    @apply w-full mt-1.5;
  }

  .setting-info {
    @apply mt-2.5 text-[13px] italic leading-[1.5];
    color: var(--text-secondary);
  }

  .model-status {
    @apply mt-3 text-xs;
    color: var(--text-secondary);
  }

  .api-status {
    @apply mt-4 pt-3;
    border-top: 1px solid rgba(0, 0, 0, 0.05);
  }

  .api-status-title {
    @apply text-[13px] font-semibold mb-2;
    color: var(--text-primary);
  }

  .api-status-grid {
    @apply grid gap-2.5;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  }

  /* Buttons */
  .primary-btn,
  .secondary-btn {
    @apply w-full px-4 py-3 rounded-xl text-[15px] font-semibold cursor-pointer border-0 inline-flex items-center justify-center gap-1.5;
    transition: var(--transition);
  }

  .primary-btn {
    @apply text-white;
    background: linear-gradient(135deg, var(--secondary-color), #5DBB63);
    box-shadow: 0 4px 12px rgba(82, 200, 159, 0.35);
  }

  .secondary-btn {
    @apply mt-2.5;
    background: rgba(74, 144, 226, 0.12);
    color: var(--medical-blue-dark);
    border: 1px solid rgba(74, 144, 226, 0.25);
  }

  .secondary-btn.warning {
    background: rgba(243, 156, 18, 0.12);
    border-color: rgba(243, 156, 18, 0.35);
    color: var(--warning);
  }

  .secondary-btn.danger {
    background: rgba(231, 76, 60, 0.12);
    border-color: rgba(231, 76, 60, 0.35);
    color: var(--error);
  }

  .primary-btn:hover,
  .secondary-btn:hover {
    @apply -translate-y-px;
    box-shadow: 0 4px 12px rgba(74, 144, 226, 0.2);
  }

  /* Stats Card Panel */
  .stats-card-panel {
    @apply rounded-[14px] p-4;
    background: rgba(255, 255, 255, 0.85);
    border: 1px solid rgba(0, 0, 0, 0.05);
  }

  .stats-grid {
    @apply grid gap-3;
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .stats-block {
    @apply text-center;
  }

  .stats-value {
    @apply text-[26px] font-bold;
    color: var(--primary-color);
  }

  .stats-label {
    @apply text-xs;
    color: var(--text-secondary);
  }

  .stats-extra {
    @apply mt-3.5 text-[13px] grid gap-1.5;
    color: var(--text-secondary);
  }

  /* Overlay */
  .overlay {
    @apply fixed top-0 left-0 w-full h-full opacity-0 invisible z-[999];
    background: rgba(0, 0, 0, 0.3);
    transition: opacity 0.3s, visibility 0.3s;
  }

  .overlay.show {
    @apply opacity-100 visible;
  }

  /* Knowledge Panel */
  .knowledge-panel {
    @apply fixed top-0 h-screen w-[500px] overflow-y-auto z-[1000];
    right: -500px;
    background: var(--cream);
    box-shadow: -5px 0 20px rgba(0, 0, 0, 0.1);
    transition: right 0.3s ease;
  }

  .knowledge-panel.open {
    @apply right-0;
  }

  .knowledge-header {
    @apply p-5 text-white flex justify-between items-center sticky top-0 z-10;
    background: linear-gradient(135deg, var(--secondary-color), #5DBB63);
  }

  .knowledge-title {
    @apply text-lg font-semibold flex items-center gap-2;
  }

  .close-knowledge {
    @apply w-9 h-9 rounded-full border-0 flex items-center justify-center cursor-pointer;
    background: rgba(255, 255, 255, 0.2);
    transition: var(--transition);
  }

  .close-knowledge:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: rotate(90deg);
  }

  .knowledge-content {
    @apply p-5 flex flex-col gap-5;
  }

  .kb-stats {
    @apply grid gap-3;
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }

  .kb-stat {
    @apply bg-white rounded-xl p-4 text-center;
    box-shadow: 0 2px 10px var(--shadow-soft);
  }

  .kb-stat-value {
    @apply text-2xl font-bold;
    color: var(--primary-color);
  }

  .kb-stat-label {
    @apply text-xs mt-1;
    color: var(--text-secondary);
  }

  .kb-section {
    @apply bg-white rounded-2xl p-5;
    box-shadow: 0 2px 12px var(--shadow-soft);
  }

  .kb-section h3 {
    @apply text-lg mb-3.5;
    color: var(--text-primary);
  }

  .kb-form {
    @apply flex flex-col gap-3.5;
  }

  .form-group {
    @apply flex flex-col gap-2;
  }

  .kb-question {
    @apply w-full px-3 py-2.5 rounded-[10px] text-sm;
    border: 2px solid var(--secondary-color);
    background: var(--cream);
    color: var(--text-primary);
  }

  .kb-form textarea {
    @apply w-full px-3 py-3 rounded-xl text-sm resize-y min-h-[120px];
    border: 2px solid var(--secondary-color);
    background: var(--cream);
    color: var(--text-primary);
  }

  .add-question-btn,
  .kb-save-btn {
    @apply self-start px-3.5 py-2 rounded-[10px] text-sm font-semibold cursor-pointer border-0;
    transition: var(--transition);
  }

  .add-question-btn {
    background: rgba(74, 144, 226, 0.12);
    color: var(--medical-blue-dark);
  }

  .add-question-btn:hover {
    background: rgba(74, 144, 226, 0.2);
  }

  .kb-save-btn {
    @apply text-white;
    background: linear-gradient(135deg, var(--secondary-color), #5DBB63);
    box-shadow: 0 4px 12px rgba(82, 200, 159, 0.35);
  }

  .kb-save-btn:hover {
    @apply -translate-y-px;
  }

  .qa-list {
    @apply flex flex-col gap-3;
  }

  /* Speaking Indicator */
  .speaking-indicator {
    @apply fixed right-6 bottom-[120px] inline-flex items-center gap-2 px-4 py-1.5 text-white rounded-[20px] text-sm opacity-0 z-[3000] pointer-events-none;
    background: linear-gradient(135deg, var(--primary-color), #FF8A4C);
    transition: opacity 0.3s;
  }

  .speaking-indicator.active {
    @apply opacity-100;
  }

  /* Auto Listening Indicator */
  .auto-listening-indicator {
    @apply fixed top-[120px] right-[30px] hidden items-center gap-2.5 px-4 py-2.5 text-white rounded-[25px] text-[15px] font-semibold z-[2500];
    background: linear-gradient(135deg, #52C89F, #7ED9C3);
    box-shadow: 0 4px 15px rgba(82, 200, 159, 0.4);
    animation: slideInRight 0.4s ease;
    transition: all 0.3s ease;
  }

  .auto-listening-indicator.always-listening {
    @apply flex;
  }

  .auto-listening-indicator.command-recognized {
    @apply scale-110;
    background: linear-gradient(135deg, #4CAF50, #52C89F);
    box-shadow: 0 6px 20px rgba(82, 200, 159, 0.6);
  }

  .listening-animation {
    @apply flex gap-1 items-center;
  }

  .listening-dot {
    @apply w-2 h-2 bg-white rounded-full;
    animation: listening-pulse 1.4s ease-in-out infinite;
  }

  .listening-dot:nth-child(1) {
    animation-delay: 0s;
  }

  .listening-dot:nth-child(2) {
    animation-delay: 0.2s;
  }

  .listening-dot:nth-child(3) {
    animation-delay: 0.4s;
  }

  /* Command Label */
  .command-label {
    @apply fixed top-[180px] right-[30px] text-white px-5 py-3 rounded-[20px] text-sm font-semibold z-[2600] pointer-events-none;
    background: rgba(76, 175, 80, 0.95);
    box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
    animation: commandLabelFade 2.3s ease forwards;
  }
}

/* ===== Animations ===== */
@layer utilities {
  @keyframes parallax {
    0% {
      background-position: 0% 0%;
    }
    100% {
      background-position: 100% 100%;
    }
  }

  @keyframes falling-leaf {
    0% {
      transform: translateY(-20px) rotate(0deg);
      opacity: 0;
    }
    10% {
      opacity: 0.3;
    }
    100% {
      transform: translateY(100vh) rotate(360deg);
      opacity: 0;
    }
  }

  @keyframes loading-bounce {
    0%,
    100% {
      transform: translateY(0) scale(1);
    }
    50% {
      transform: translateY(-20px) scale(1.05);
    }
  }

  @keyframes bubbleAppear {
    from {
      opacity: 0;
      transform: translateY(15px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes nurse-idle {
    0%,
    100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-8px);
    }
  }

  @keyframes recording-pulse {
    0%,
    100% {
      box-shadow: 0 0 0 0 rgba(255, 107, 107, 0.7);
    }
    50% {
      box-shadow: 0 0 0 15px rgba(255, 107, 107, 0);
    }
  }

  @keyframes slideInRight {
    from {
      transform: translateX(100px);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes listening-pulse {
    0%,
    100% {
      transform: scale(1);
      opacity: 0.5;
    }
    50% {
      transform: scale(1.5);
      opacity: 1;
    }
  }

  @keyframes commandLabelFade {
    0% {
      opacity: 0;
      transform: translateY(-10px) scale(0.9);
    }
    10% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    85% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    100% {
      opacity: 0;
      transform: translateY(-10px) scale(0.95);
    }
  }
}

/* ===== Responsive Design ===== */
@layer utilities {
  /* Tablet (768px - 1023px) */
  @media (max-width: 1023px) {
    :root {
      --topbar-height: 80px;
      --composer-height: 90px;
    }

    .chat-and-tools {
      @apply grid-cols-1;
    }

    .tools-sidebar {
      @apply hidden;
    }

    .params-drawer {
      @apply block;
    }

    .mobile-params-trigger {
      @apply flex;
    }

    .bottom-composer {
      grid-template-columns: 1fr auto auto;
    }

    .checkbox-wrapper {
      @apply hidden;
    }
  }

  /* Mobile (<768px) */
  @media (max-width: 767px) {
    :root {
      --topbar-height: 70px;
      --composer-height: 100px;
    }

    .main-container {
      @apply p-2.5;
    }

    .app-title {
      @apply text-xl;
    }

    .nurse-logo {
      @apply w-10 h-10;
    }

    .performance-badge {
      @apply text-[11px] px-2.5 py-1;
    }

    .messages-area {
      @apply px-4 pt-[30px] pb-4 text-base;
    }

    .bottom-composer {
      @apply p-2;
      grid-template-columns: 1fr auto auto;
    }

    .bottom-composer textarea {
      @apply text-sm px-3.5 py-2.5 min-h-[40px];
    }

    .voice-button,
    .icon-button {
      @apply w-11 h-11;
    }

    .fox-assistant {
      @apply w-20 h-20 bottom-[110px] right-5;
    }

    .mini-weather {
      @apply top-5 right-20 text-xs;
    }
  }

  /* Extra Small Screens */
  @media (max-width: 375px) {
    .bottom-composer {
      @apply gap-1.5;
    }

    .voice-button,
    .icon-button {
      @apply w-10 h-10 text-lg;
    }
  }
}
